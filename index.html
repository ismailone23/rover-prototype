<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Mars Rover Mission Control</title>
    <script defer src="index.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/nipplejs/0.10.1/nipplejs.min.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="header">
      <h1>MARS ROVER v1.0 - CONTROL INTERFACE</h1>
    </div>

    <div class="grid">
      <div class="panel">
        <h3>Drive System (N20 Motors)</h3>
        <p>Use Buttons or Keys: <b>W, A, S, D</b> | Stop: <b>Space</b></p>
        <div class="motor-grid">
          <button
            class="btn"
            style="grid-area: up"
            id="btn-W"
            onclick="sendCommand('MOVE_F')"
          >
            FORWARD (W)
          </button>
          <button
            class="btn"
            style="grid-area: left"
            id="btn-A"
            onclick="sendCommand('MOVE_L')"
          >
            LEFT (A)
          </button>
          <button
            class="btn"
            style="grid-area: stop"
            id="btn-Space"
            onclick="sendCommand('STOP')"
          >
            STOP (Space)
          </button>
          <button
            class="btn"
            style="grid-area: right"
            id="btn-D"
            onclick="sendCommand('MOVE_R')"
          >
            RIGHT (D)
          </button>
          <button
            class="btn"
            style="grid-area: down"
            id="btn-S"
            onclick="sendCommand('MOVE_S')"
          >
            BACK (S)
          </button>
        </div>
      </div>

      <div class="panel">
        <h3>Axle Steering (MG90S Servos)</h3>
        <p>Move joystick to rotate wheel orientation</p>
        <div id="joy-container"></div>
      </div>

      <div class="panel" style="grid-column: span 2">
        <div class="status-bar">
          Serial Status:
          <span id="status" style="color: red">Disconnected</span> |
          <button onclick="connectSerial()">Connect to Pico Gateway</button>
        </div>
        <div style="display: flex; gap: 10px">
          <input
            type="text"
            id="gpsInput"
            placeholder="Enter Target Coordinates (Lat, Long)"
          />
          <button class="btn" onclick="sendGPS()" style="padding: 5px 15px">
            Send GPS Command
          </button>
        </div>
        <div id="console">--- Awaiting System Telemetry ---</div>
      </div>
    </div>
  </body>
</html>
